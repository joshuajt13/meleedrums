<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Melee Drum!</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>


  <div class="keys">
      <div data-key="65" class="key" id = "cmons">
        <kbd>A</kbd>
        <span class="sound"><button onclick="playSoundButton('cmon');">cmon</button></span></br>    
      </div>
      <div data-key="83" class="key" id = "cocks">
        <kbd>S</kbd>
        <span class="sound"><button onclick="playSoundButton('cock');">cock</button></span></br>
      </div>
      <div data-key="68" class="key" id = "completes">
        <kbd>D</kbd>
        <span class="sound"><button onclick="playSoundButton('complete');">complete</button></span></br>      
      </div>
      <div data-key="70" class="key" id = "eughs">
        <kbd>F</kbd>
        <span class="sound"><button onclick="playSoundButton('eugh');">eugh</button></span></br>
      </div>
      <div data-key="71" class="key" id = "hiyahs">
        <kbd>G</kbd>
        <span class="sound"><button onclick="playSoundButton('hiyah');">hiyah</button></span></br>   
      </div>
      <div data-key="72" class="key" id = "lasers">
        <kbd>H</kbd>
        <span class="sound"><button onclick="playSoundButton('laser');">laser</button></span></br>     
      </div>
      <div data-key="74" class="key" id = "shines">
        <kbd>J</kbd>
        <span class="sound"><button onclick="playSoundButton('shine');">shine</button></span></br>
      </div>
      <div data-key="75" class="key" id = "toryahs">
        <kbd>K</kbd>
        <span class="sound"><button onclick="playSoundButton('toryah');">toryah</button></span></br>
      </div>
      <div data-key="76" class="key" id = "wahhs">
        <kbd>L</kbd>
        <span class="sound"><button onclick="playSoundButton('wahh');">wahh</button></span></br>        
    </div>
    
  </div>

  <audio data-key="65" id = "cmon" src="sounds/cmon.wav"></audio>
  <audio data-key="83" id = "cock" src="sounds/cock.wav"></audio>
  <audio data-key="68" id = "complete" src="sounds/complete.wav"></audio>
  <audio data-key="70" id = "eugh" src="sounds/eugh.wav"></audio>
  <audio data-key="71" id = "hiyah" src="sounds/hiyah.wav"></audio>
  <audio data-key="72" id = "laser" src="sounds/laser.wav"></audio>
  <audio data-key="74" id = "shine" src="sounds/shine.wav"></audio>
  <audio data-key="75" id = "toryah" src="sounds/toryah.wav"></audio>
  <audio data-key="76" id = "wahh" src="sounds/wahh.wav"></audio>

<script>
  
  function playSound (e) {
    const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
    const key = document.querySelector(`.key[data-key="${e.keyCode}"]`);
    if(!audio) return; //stop the function from running all together
    audio.currentTime = 0;
    audio.play();
    key.classList.add('playing');
  }

  function playSoundButton(e) {
    const audio = document.getElementById(e); //console.log(audio gives <audio data-key="76" id = "tink" src="sounds/tink.wav"></audio>)
    audio.currentTime = 0;
    audio.play();
    const key = document.querySelector(`.key[id="${e+'s'}"]`);
    key.classList.add('playing');
  }

  function removeTransition(e) {
    if(e.propertyName !== 'transform') return; // skip it if it's not a transform
    this.classList.remove('playing');
  }

  const keys = document.querySelectorAll('.key');
  keys.forEach(key => key.addEventListener('transitionend', removeTransition));

  window.addEventListener('keydown', playSound);
</script>


</body>
</html>
